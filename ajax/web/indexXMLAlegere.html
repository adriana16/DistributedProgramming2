<html>
<head>

<script language="javascript">
<!--
function initRequest() {
  if (window.XMLHttpRequest) {
    return new XMLHttpRequest();
  } 
  else if (window.ActiveXObject){
    return new ActiveXObject("Microsoft.XMLHTTP");
  }
}

function doCompletion() {
  var tipField=document.getElementById("tip");
  var url = "/ajax/completare?tip="+escape(tipField.value);
  var req = initRequest();
  if(req!=null){
    req.open("GET", url, true);
    req.onreadystatechange = function() {
            if (req.readyState == 4) {
                if (req.status == 200) {
                   parseMessages(req.responseXML);
                } else {
                    alert(req.status+" : "+req.statusText);
                }
            }
    };
    req.send(null);
  }
}

function parseMessages(responseXML) {
  var optionale = responseXML.getElementsByTagName("optionale")[0];
  var select=document.getElementById("alegere");  
  for (loop = 0; loop < optionale.childNodes.length; loop++){
    var disciplina = optionale.childNodes[loop];
    var denumire = disciplina.getElementsByTagName("denumire")[0];
    var den=denumire.childNodes[0].nodeValue;
    select.options[loop]=new Option(den,den,false,false);
  }
}
-->
</script>

<title>Auto-Completion using Asynchronous JavaScript and XML (AJAX)</title>
</head>
 <body onload="doCompletion()">
 
 <h1>Auto-Completion using Asynchronous JavaScript and XML (AJAX)</h1>
 
 <form name="autofillform" action="/ajax/alegerea" method="get">

    
   <b>Disciplina optional : </b>
     
      <select name="alegere" id="alegere" >         
      </select>     

    <p>
      <input type="Submit" value="Transmite">
      <input type="reset" value="Abandon" >
      <input type="hidden" id="tip" value="xml" >
  </form>
 </body>
</html>
